"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{3094:function(t,e,a){var n=a(4836);e.Z=void 0;var r=n(a(4938)),o=a(5893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M11.07 12.85c.77-1.39 2.25-2.21 3.11-3.44.91-1.29.4-3.7-2.18-3.7-1.69 0-2.52 1.28-2.87 2.34L6.54 6.96C7.25 4.83 9.18 3 11.99 3c2.35 0 3.96 1.07 4.78 2.41.7 1.15 1.11 3.3.03 4.9-1.2 1.77-2.35 2.31-2.97 3.45-.25.46-.35.76-.35 2.24h-2.89c-.01-.78-.13-2.05.48-3.15M14 20c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2"}),"QuestionMark")},2961:function(t,e,a){var n=a(4836);e.Z=void 0;var r=n(a(4938)),o=a(5893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},951:function(t,e,a){a.r(e),a.d(e,{default:function(){return StrandsHintDisplay}});var n=a(5893),r=a(7294),o=a(2734),i=a(6242),c=a(4267),l=a(5861),s=a(1233),d=a(7918),x=a(5616),f=a(2023),h=a(9417),p=a(3094),g=a(6886);let u=r.forwardRef((t,e)=>{let{startingBoard:a,themeCoords:o,spangram:i,isLargeScreenDevice:c}=t,[s,d]=r.useState([]),f=r.useRef(null),h=c?1.05:1.25,p=3.125/h,u=.9375/h,m=.4/h;r.useEffect(()=>{drawBoard()},[s]),r.useImperativeHandle(e,()=>({drawAllWords,drawWord,clearAllLines,clearWordLines}));let drawBoard=()=>{let t=f.current,e=t.getContext("2d"),a=window.devicePixelRatio||1,n=t.getBoundingClientRect();t.width=n.width*a,t.height=n.height*a,e.scale(a,a),e.clearRect(0,0,t.width,t.height);let remToPx=t=>t*parseFloat(getComputedStyle(document.documentElement).fontSize);function drawLine(t){e.beginPath(),e.strokeStyle=t.isSpangram?"#f8cb2c":"#4A82C3",e.lineWidth=remToPx(m),e.moveTo(t.points[0].y*remToPx(p)+remToPx(p)/2,t.points[0].x*remToPx(p)+remToPx(p)/2),e.lineTo(t.points[1].y*remToPx(p)+remToPx(p)/2,t.points[1].x*remToPx(p)+remToPx(p)/2),e.stroke(),e.fillStyle=t.isSpangram?"#f8cb2c":"#4A82C3",t.points.forEach(t=>{e.beginPath(),e.arc(t.y*remToPx(p)+remToPx(p)/2,t.x*remToPx(p)+remToPx(p)/2,remToPx(u),0,2*Math.PI),e.fill()})}s.filter(t=>!t.isSpangram).forEach(drawLine),s.filter(t=>t.isSpangram).forEach(drawLine)},isAdjacent=(t,e)=>{let a=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return a<=1&&n<=1&&!(0===a&&0===n)},isValidLine=(t,e,a)=>{let n=e.x-t.x,r=e.y-t.y,o=Math.max(Math.abs(n),Math.abs(r));for(let e=1;e<o;e++){let i=t.x+n*(e/o),c=t.y+r*(e/o);for(let e of a){let[a,n]=e.points;if(intersects(t,{x:i,y:c},a,n))return!1}}return!0},intersects=(t,e,a,n)=>(n.y-t.y)*(a.x-t.x)>(a.y-t.y)*(n.x-t.x)!=(n.y-e.y)*(a.x-e.x)>(a.y-e.y)*(n.x-e.x)&&(a.y-t.y)*(e.x-t.x)>(e.y-t.y)*(a.x-t.x)!=(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x),drawWord=t=>{if(o[t]){let e=o[t],a=[];for(let t=0;t<e.length-1;t++)a.push({points:[{x:e[t][0],y:e[t][1]},{x:e[t+1][0],y:e[t+1][1]}],isSpangram:!1});d(t=>{let n=t.filter(t=>!e.some(e=>e[0]===t.points[0].x&&e[1]===t.points[0].y||e[0]===t.points[1].x&&e[1]===t.points[1].y));return[...n,...a]})}else if(t===i){let t=new Set;Object.values(o).forEach(e=>{e.forEach(e=>t.add("".concat(e[0],",").concat(e[1])))});let e=[];a.forEach((a,n)=>{a.split("").forEach((a,r)=>{t.has("".concat(n,",").concat(r))||e.push({x:n,y:r,letter:a})})});let n=[],r=new Map;e.forEach(t=>r.set("".concat(t.x,",").concat(t.y),{asStart:!1,asEnd:!1}));let findPath=(t,a)=>{if(0===a.length)return t;let o=t[t.length-1],i=a[0];for(let c of e)if(c.letter===i&&isAdjacent(o,c)&&!r.get("".concat(c.x,",").concat(c.y)).asEnd&&!r.get("".concat(o.x,",").concat(o.y)).asStart){let e={points:[o,c],isSpangram:!0};if(isValidLine(o,c,n)){r.get("".concat(o.x,",").concat(o.y)).asStart=!0,r.get("".concat(c.x,",").concat(c.y)).asEnd=!0,n.push(e);let i=findPath([...t,c],a.slice(1));if(i)return i;n.pop(),r.get("".concat(o.x,",").concat(o.y)).asStart=!1,r.get("".concat(c.x,",").concat(c.y)).asEnd=!1}}return null};for(let t of e)if(t.letter===i[0]&&!r.get("".concat(t.x,",").concat(t.y)).asEnd){r.get("".concat(t.x,",").concat(t.y)).asEnd=!0;let e=findPath([t],i.slice(1));if(e){d(t=>{let e=t.filter(t=>!t.isSpangram);return[...e,...n]});return}r.get("".concat(t.x,",").concat(t.y)).asEnd=!1}}},clearAllLines=()=>{d([])},drawAllWords=()=>{clearAllLines();let t=[];Object.entries(o).forEach(e=>{let[a,n]=e;for(let e=0;e<n.length-1;e++)t.push({points:[{x:n[e][0],y:n[e][1]},{x:n[e+1][0],y:n[e+1][1]}],isSpangram:!1})});let e=new Set;Object.values(o).forEach(t=>{t.forEach(t=>e.add("".concat(t[0],",").concat(t[1])))});let n=[];a.forEach((t,a)=>{t.split("").forEach((t,r)=>{e.has("".concat(a,",").concat(r))||n.push({x:a,y:r,letter:t})})});let r=[],c=new Map;n.forEach(t=>c.set("".concat(t.x,",").concat(t.y),{asStart:!1,asEnd:!1}));let findPath=(t,e)=>{if(0===e.length)return t;let a=t[t.length-1],o=e[0];for(let i of n)if(i.letter===o&&isAdjacent(a,i)&&!c.get("".concat(i.x,",").concat(i.y)).asEnd&&!c.get("".concat(a.x,",").concat(a.y)).asStart){let n={points:[a,i],isSpangram:!0};if(isValidLine(a,i,r)){c.get("".concat(a.x,",").concat(a.y)).asStart=!0,c.get("".concat(i.x,",").concat(i.y)).asEnd=!0,r.push(n);let o=findPath([...t,i],e.slice(1));if(o)return o;r.pop(),c.get("".concat(a.x,",").concat(a.y)).asStart=!1,c.get("".concat(i.x,",").concat(i.y)).asEnd=!1}}return null};for(let e of n)if(e.letter===i[0]&&!c.get("".concat(e.x,",").concat(e.y)).asEnd){c.get("".concat(e.x,",").concat(e.y)).asEnd=!0;let a=findPath([e],i.slice(1));if(a){t.push(...r);break}c.get("".concat(e.x,",").concat(e.y)).asEnd=!1}d(t)},clearWordLines=t=>{if(o[t]){let e=o[t];d(t=>t.filter(t=>!e.some(e=>e[0]===t.points[0].x&&e[1]===t.points[0].y||e[0]===t.points[1].x&&e[1]===t.points[1].y)))}else t===i&&d(t=>t.filter(t=>!t.isSpangram))};return(0,n.jsxs)(x.Z,{position:"relative",maxWidth:"100%",width:"".concat(6*p,"rem"),height:"".concat(8*p,"rem"),children:[(0,n.jsx)(g.ZP,{container:!0,spacing:0,children:a.map((t,e)=>t.split("").map((t,a)=>(0,n.jsx)(g.ZP,{item:!0,xs:2,children:(0,n.jsx)(x.Z,{display:"flex",justifyContent:"center",alignItems:"center",width:"".concat(p,"rem"),height:"".concat(p,"rem"),border:"1px solid #A8B9BF",position:"relative",zIndex:1,children:(0,n.jsx)(l.Z,{component:"span",variant:"h6",style:{color:"#333333"},children:t})})},"".concat(e,"-").concat(a))))}),(0,n.jsx)("canvas",{ref:f,width:"".concat(6*p,"rem"),height:"".concat(8*p,"rem"),style:{position:"absolute",top:0,left:0,pointerEvents:"none",width:"100%",height:"100%",border:"2px solid #A8B9BF"}})]})});var m=a(2450),y=a(2961),StrandsHintDisplay=function(t){var e,a,g,b,S,w,v,j;let{responseData:E,isLargeScreenDevice:C}=t,A=null!==(S=null===(e=E.gameData)||void 0===e?void 0:e.startingBoard)&&void 0!==S?S:[],P=null!==(w=null===(a=E.gameData)||void 0===a?void 0:a.themeWords)&&void 0!==w?w:[],T=null!==(v=null===(g=E.gameData)||void 0===g?void 0:g.themeCoords)&&void 0!==v?v:[],Z=null!==(j=null===(b=E.gameData)||void 0===b?void 0:b.spangram)&&void 0!==j?j:"",W=[Z,...P],[L,k]=r.useState(()=>[...Array(W.length).fill(!1)]),[M,F]=r.useState(!1),[R,B]=r.useState(!1),z=r.useRef(),H=(0,o.Z)(),handleHintToggleVisibility=t=>{k(e=>{let a=e.map((e,a)=>a===t?!e:e),n=a.every(t=>!0===t);return F(n),0===t&&B(a[0]),a[t]?drawWord(W[t]):clearWordLines(W[t]),a})},setAllHintsVisibleStates=()=>{k(t=>{let e=Array(L.length).fill(!M);return F(!M),B(!M),M?clearAllLines():drawAllWords(),e})},drawWord=t=>{z.current&&z.current.drawWord(t)},clearAllLines=()=>{z.current&&z.current.clearAllLines()},clearWordLines=t=>{z.current&&z.current.clearWordLines(t)},drawAllWords=()=>{z.current&&z.current.drawAllWords()},getChipStyles=t=>({fontWeight:L[t]?"bold":"normal",color:"#FFFFFF",bgcolor:0===t?"#f8cb2c":"#4A82C3",cursor:"pointer",boxShadow:"0 2px 4px ".concat(0===t?"rgba(248,203,44,0.4)":"rgba(174,223,238,0.4)"),border:"1px solid ".concat(0===t?"rgba(248,203,44,0.3)":"rgba(174,223,238,0.3)"),transition:"all 0.2s ease-in-out","&:hover":{bgcolor:0===t?"#ffd747":"#6C9AD0",boxShadow:"0 4px 8px ".concat(0===t?"rgba(248,203,44,0.5)":"rgba(174,223,238,0.5)"),transform:"translateY(-1px)",border:"1px solid ".concat(0===t?"rgba(248,203,44,0.4)":"rgba(174,223,238,0.4)")},"&:active":{transform:"translateY(1px)",boxShadow:"0 1px 2px ".concat(0===t?"rgba(248,203,44,0.3)":"rgba(174,223,238,0.3)")},"&:focus":{bgcolor:0===t?"#f8cb2c":"#4A82C3",outline:"none"}});return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(i.Z,{sx:{backgroundColor:"#E3F4F9",marginTop:"".concat(H.spacing(2)," !important"),borderRadius:"0.75rem !important",boxShadow:"0 0.25rem 0.375rem rgba(0, 0, 0, 0.08) !important","& .MuiCardContent-root":{borderBottomLeftRadius:"0.75rem",borderBottomRightRadius:"0.75rem"}},children:[(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(l.Z,{sx:{fontSize:{xs:"0.8rem",sm:"0.9rem"},fontStyle:"italic",color:"text.secondary",display:"flex",justifyContent:"center",mb:3},children:"Click a blue bubble to reveal a theme word. The final yellow bubble reveals the spangram.."}),(0,n.jsxs)(s.Z,{spacing:1,direction:"row",useFlexGap:!0,flexWrap:"wrap",justifyContent:"center",children:[W.map((t,e)=>0===e?null:(0,n.jsx)(d.Z,{label:L[e]?t:(0,n.jsx)(p.Z,{fontSize:"small"}),size:"medium",sx:getChipStyles(e),onClick:()=>handleHintToggleVisibility(e)},e)),(0,n.jsx)(d.Z,{label:L[0]?W[0]:(0,n.jsx)(p.Z,{fontSize:"small"}),size:"medium",sx:getChipStyles(0),onClick:()=>handleHintToggleVisibility(0)},0)]}),(0,n.jsx)(x.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"center",mt:3},children:(0,n.jsx)(u,{ref:z,startingBoard:A,themeCoords:T,spangram:Z,isLargeScreenDevice:C})})]}),(0,n.jsx)(f.Z,{sx:{padding:"8px 16px 16px",borderTop:"none",justifyContent:"flex-end"},children:(0,n.jsx)(h.Z,{variant:"contained",startIcon:M?(0,n.jsx)(m.Z,{sx:{fontSize:"1.1rem"}}):(0,n.jsx)(y.Z,{sx:{fontSize:"1.1rem"}}),onClick:()=>setAllHintsVisibleStates(),sx:{textTransform:"none",fontSize:"0.9rem",fontWeight:500,backgroundColor:"rgba(0, 0, 0, 0.08)",color:"rgba(0, 0, 0, 0.8)",boxShadow:"none","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.12)",boxShadow:"none"},borderRadius:"6px",py:.75},children:M?"Hide Answers":"Reveal Answers"})})]})})}}}]);