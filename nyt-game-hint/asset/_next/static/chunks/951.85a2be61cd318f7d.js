"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{3094:function(e,t,a){var n=a(4836);t.Z=void 0;var r=n(a(4938)),o=a(5893);t.Z=(0,r.default)((0,o.jsx)("path",{d:"M11.07 12.85c.77-1.39 2.25-2.21 3.11-3.44.91-1.29.4-3.7-2.18-3.7-1.69 0-2.52 1.28-2.87 2.34L6.54 6.96C7.25 4.83 9.18 3 11.99 3c2.35 0 3.96 1.07 4.78 2.41.7 1.15 1.11 3.3.03 4.9-1.2 1.77-2.35 2.31-2.97 3.45-.25.46-.35.76-.35 2.24h-2.89c-.01-.78-.13-2.05.48-3.15M14 20c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2"}),"QuestionMark")},951:function(e,t,a){a.r(t),a.d(t,{default:function(){return StrandsHintDisplay}});var n=a(5893),r=a(7294),o=a(2734),c=a(2280),i=a(8895),l=a(5861),s=a(2797),d=a(5616),x=a(1233),h=a(7918),f=a(2180),p=a(9417),u=a(3508),g=a(3094),m=a(6886);let y=r.forwardRef((e,t)=>{let{startingBoard:a,themeCoords:o,spangram:c,isLargeScreenDevice:i}=e,[s,x]=r.useState([]),h=r.useRef(null),f=i?1.15:1.3,p=3.125/f,u=.9375/f,g=.4/f;r.useEffect(()=>{drawBoard()},[s]),r.useImperativeHandle(t,()=>({drawAllWords,drawWord,clearAllLines,clearWordLines}));let drawBoard=()=>{let e=h.current,t=e.getContext("2d"),a=window.devicePixelRatio||1,n=e.getBoundingClientRect();e.width=n.width*a,e.height=n.height*a,t.scale(a,a),t.clearRect(0,0,e.width,e.height);let remToPx=e=>e*parseFloat(getComputedStyle(document.documentElement).fontSize);function drawLine(e){t.beginPath(),t.strokeStyle=e.isSpangram?"#f8cb2c":"#aedfee",t.lineWidth=remToPx(g),t.moveTo(e.points[0].y*remToPx(p)+remToPx(p)/2,e.points[0].x*remToPx(p)+remToPx(p)/2),t.lineTo(e.points[1].y*remToPx(p)+remToPx(p)/2,e.points[1].x*remToPx(p)+remToPx(p)/2),t.stroke(),t.fillStyle=e.isSpangram?"#f8cb2c":"#aedfee",e.points.forEach(e=>{t.beginPath(),t.arc(e.y*remToPx(p)+remToPx(p)/2,e.x*remToPx(p)+remToPx(p)/2,remToPx(u),0,2*Math.PI),t.fill()})}s.filter(e=>!e.isSpangram).forEach(drawLine),s.filter(e=>e.isSpangram).forEach(drawLine)},isAdjacent=(e,t)=>{let a=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return a<=1&&n<=1&&!(0===a&&0===n)},isValidLine=(e,t,a)=>{let n=t.x-e.x,r=t.y-e.y,o=Math.max(Math.abs(n),Math.abs(r));for(let t=1;t<o;t++){let c=e.x+n*(t/o),i=e.y+r*(t/o);for(let t of a){let[a,n]=t.points;if(intersects(e,{x:c,y:i},a,n))return!1}}return!0},intersects=(e,t,a,n)=>(n.y-e.y)*(a.x-e.x)>(a.y-e.y)*(n.x-e.x)!=(n.y-t.y)*(a.x-t.x)>(a.y-t.y)*(n.x-t.x)&&(a.y-e.y)*(t.x-e.x)>(t.y-e.y)*(a.x-e.x)!=(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x),drawWord=e=>{if(o[e]){let t=o[e],a=[];for(let e=0;e<t.length-1;e++)a.push({points:[{x:t[e][0],y:t[e][1]},{x:t[e+1][0],y:t[e+1][1]}],isSpangram:!1});x(e=>{let n=e.filter(e=>!t.some(t=>t[0]===e.points[0].x&&t[1]===e.points[0].y||t[0]===e.points[1].x&&t[1]===e.points[1].y));return[...n,...a]})}else if(e===c){let e=new Set;Object.values(o).forEach(t=>{t.forEach(t=>e.add("".concat(t[0],",").concat(t[1])))});let t=[];a.forEach((a,n)=>{a.split("").forEach((a,r)=>{e.has("".concat(n,",").concat(r))||t.push({x:n,y:r,letter:a})})});let n=[],r=new Map;t.forEach(e=>r.set("".concat(e.x,",").concat(e.y),{asStart:!1,asEnd:!1}));let findPath=(e,a)=>{if(0===a.length)return e;let o=e[e.length-1],c=a[0];for(let i of t)if(i.letter===c&&isAdjacent(o,i)&&!r.get("".concat(i.x,",").concat(i.y)).asEnd&&!r.get("".concat(o.x,",").concat(o.y)).asStart){let t={points:[o,i],isSpangram:!0};if(isValidLine(o,i,n)){r.get("".concat(o.x,",").concat(o.y)).asStart=!0,r.get("".concat(i.x,",").concat(i.y)).asEnd=!0,n.push(t);let c=findPath([...e,i],a.slice(1));if(c)return c;n.pop(),r.get("".concat(o.x,",").concat(o.y)).asStart=!1,r.get("".concat(i.x,",").concat(i.y)).asEnd=!1}}return null};for(let e of t)if(e.letter===c[0]&&!r.get("".concat(e.x,",").concat(e.y)).asEnd){r.get("".concat(e.x,",").concat(e.y)).asEnd=!0;let t=findPath([e],c.slice(1));if(t){x(e=>{let t=e.filter(e=>!e.isSpangram);return[...t,...n]});return}r.get("".concat(e.x,",").concat(e.y)).asEnd=!1}}},clearAllLines=()=>{x([])},drawAllWords=()=>{clearAllLines();let e=[];Object.entries(o).forEach(t=>{let[a,n]=t;for(let t=0;t<n.length-1;t++)e.push({points:[{x:n[t][0],y:n[t][1]},{x:n[t+1][0],y:n[t+1][1]}],isSpangram:!1})});let t=new Set;Object.values(o).forEach(e=>{e.forEach(e=>t.add("".concat(e[0],",").concat(e[1])))});let n=[];a.forEach((e,a)=>{e.split("").forEach((e,r)=>{t.has("".concat(a,",").concat(r))||n.push({x:a,y:r,letter:e})})});let r=[],i=new Map;n.forEach(e=>i.set("".concat(e.x,",").concat(e.y),{asStart:!1,asEnd:!1}));let findPath=(e,t)=>{if(0===t.length)return e;let a=e[e.length-1],o=t[0];for(let c of n)if(c.letter===o&&isAdjacent(a,c)&&!i.get("".concat(c.x,",").concat(c.y)).asEnd&&!i.get("".concat(a.x,",").concat(a.y)).asStart){let n={points:[a,c],isSpangram:!0};if(isValidLine(a,c,r)){i.get("".concat(a.x,",").concat(a.y)).asStart=!0,i.get("".concat(c.x,",").concat(c.y)).asEnd=!0,r.push(n);let o=findPath([...e,c],t.slice(1));if(o)return o;r.pop(),i.get("".concat(a.x,",").concat(a.y)).asStart=!1,i.get("".concat(c.x,",").concat(c.y)).asEnd=!1}}return null};for(let t of n)if(t.letter===c[0]&&!i.get("".concat(t.x,",").concat(t.y)).asEnd){i.get("".concat(t.x,",").concat(t.y)).asEnd=!0;let a=findPath([t],c.slice(1));if(a){e.push(...r);break}i.get("".concat(t.x,",").concat(t.y)).asEnd=!1}x(e)},clearWordLines=e=>{if(o[e]){let t=o[e];x(e=>e.filter(e=>!t.some(t=>t[0]===e.points[0].x&&t[1]===e.points[0].y||t[0]===e.points[1].x&&t[1]===e.points[1].y)))}else e===c&&x(e=>e.filter(e=>!e.isSpangram))};return(0,n.jsxs)(d.Z,{position:"relative",maxWidth:"100%",width:"".concat(6*p,"rem"),height:"".concat(8*p,"rem"),children:[(0,n.jsx)(m.ZP,{container:!0,spacing:0,children:a.map((e,t)=>e.split("").map((e,a)=>(0,n.jsx)(m.ZP,{item:!0,xs:2,children:(0,n.jsx)(d.Z,{display:"flex",justifyContent:"center",alignItems:"center",width:"".concat(p,"rem"),height:"".concat(p,"rem"),border:"1px solid #ccc",position:"relative",zIndex:1,children:(0,n.jsx)(l.Z,{component:"span",variant:"h6",style:{color:"black"},children:e})})},"".concat(t,"-").concat(a))))}),(0,n.jsx)("canvas",{ref:h,width:"".concat(6*p,"rem"),height:"".concat(8*p,"rem"),style:{position:"absolute",top:0,left:0,pointerEvents:"none",width:"100%",height:"100%",border:"2px solid #ccc"}})]})});var b=a(2450),S=a(2961),StrandsHintDisplay=function(e){var t,a,m,w,v,E,j,P,T;let{responseData:W,isLargeScreenDevice:Z}=e,A=null!==(E=null===(t=W.gameData)||void 0===t?void 0:t.startingBoard)&&void 0!==E?E:[],L=null!==(j=null===(a=W.gameData)||void 0===a?void 0:a.themeWords)&&void 0!==j?j:[],C=null!==(P=null===(m=W.gameData)||void 0===m?void 0:m.themeCoords)&&void 0!==P?P:[],k=null!==(T=null===(w=W.gameData)||void 0===w?void 0:w.spangram)&&void 0!==T?T:"",M=[k,...L],[R,H]=r.useState(()=>[!0,...Array(M.length-1).fill(!1)]),[D,F]=r.useState(!1),z=r.useRef();r.useEffect(()=>{drawWord(M[0])},[]);let I=(0,o.Z)(),handleHintToggleVisibility=e=>{H(t=>{let a=t.map((t,a)=>a===e?!t:t),n=a.every(e=>!0===e);return F(n),a[e]?drawWord(M[e]):clearWordLines(M[e]),a})},setAllHintsVisibleStates=()=>{H(e=>{let t=Array(R.length).fill(!D);return F(!D),D?clearAllLines():drawAllWords(),t})},drawWord=e=>{z.current&&z.current.drawWord(e)},clearAllLines=()=>{z.current&&z.current.clearAllLines()},clearWordLines=e=>{z.current&&z.current.clearWordLines(e)},drawAllWords=()=>{z.current&&z.current.drawAllWords()};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(c.Z,{sx:{backgroundColor:"#e6e6e6","&.Mui-expanded":{backgroundColor:"#e6e6e6"},borderRadius:"0.75rem !important",boxShadow:"0 0.25rem 0.375rem rgba(0, 0, 0, 0.08) !important","&:before":{display:"none"},"& .MuiCollapse-root":{borderBottomLeftRadius:"0.75rem",borderBottomRightRadius:"0.75rem"}},children:[(0,n.jsx)(i.Z,{expandIcon:(0,n.jsx)(u.Z,{}),id:"panel-header","aria-controls":"panel-content",children:(0,n.jsxs)(l.Z,{sx:{fontWeight:500,fontSize:{xs:"1rem",sm:"1.1rem"}},children:[Z?"Click":"Tap"," to reveal answers"]})}),(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(d.Z,{sx:{display:"flex",alignItems:"center",mb:2},children:(0,n.jsx)(l.Z,{fontWeight:"bold",dangerouslySetInnerHTML:{__html:'TODAYâ€™S THEME: <span style="color:'.concat(I.palette.primary.main,'">').concat(null===(v=W.gameData)||void 0===v?void 0:v.clue,"</span>")}})}),(0,n.jsx)(x.Z,{spacing:1,direction:"row",useFlexGap:!0,flexWrap:"wrap",children:M.map((e,t)=>(0,n.jsx)(h.Z,{label:R[t]?e:(0,n.jsx)(g.Z,{fontSize:"small"}),size:"medium",sx:{fontWeight:R[t]?"bold":"normal",color:R[t]?"#000000":"#FFFFFF",bgcolor:0===t?"#f8cb2c":"#c0ddd9","&:focus":{bgcolor:0===t?"#f8cb2c":"#c0ddd9"}},onClick:()=>handleHintToggleVisibility(t)},t))}),(0,n.jsx)(d.Z,{sx:{flexGrow:1},mt:2,children:(0,n.jsx)(y,{ref:z,startingBoard:A,themeCoords:C,spangram:k,isLargeScreenDevice:Z})})]}),(0,n.jsx)(f.Z,{sx:{padding:"8px 16px 16px",borderTop:"none"},children:(0,n.jsx)(p.Z,{variant:"contained",startIcon:D?(0,n.jsx)(b.Z,{sx:{fontSize:"1.1rem"}}):(0,n.jsx)(S.Z,{sx:{fontSize:"1.1rem"}}),onClick:()=>setAllHintsVisibleStates(),sx:{textTransform:"none",fontSize:"0.9rem",fontWeight:500,backgroundColor:"rgba(0, 0, 0, 0.08)",color:"rgba(0, 0, 0, 0.8)",boxShadow:"none","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.12)",boxShadow:"none"},borderRadius:"6px",py:.75},children:D?"Hide Answers":"Reveal Answers"})})]})})}}}]);