"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[889],{889:function(e,t,o){o.r(t),o.d(t,{default:function(){return SudokuHintDisplay}});var r=o(5893),l=o(7294),n=o(2734),a=o(4558),i=o(2280),s=o(8895),d=o(5861),c=o(2797),u=o(1050),p=o(480),m=o(7781),h=o(5616),g=o(2180),x=o(9417),f=o(3508),b=o(948),k=o(4386);let v=(0,b.ZP)(h.Z,{shouldForwardProp:e=>"isPrefilled"!==e&&"isHighlighted"!==e&&"isRightEdge"!==e&&"isBottomEdge"!==e&&"scaleFactor"!==e&&"isSelected"!==e&&"isFlashing"!==e})(e=>{let{theme:t,isPrefilled:o,isHighlighted:r,isRightEdge:l,isBottomEdge:n,scaleFactor:a,isSelected:i,isFlashing:s}=e;return{width:"".concat(3*a,"rem"),height:"".concat(3*a,"rem"),display:"flex",justifyContent:"center",alignItems:"center",fontSize:"".concat(1.7999999999999998*a,"rem"),fontWeight:"bold",backgroundColor:o?"#E6E6E6":r?"#FFDA00":"white",borderRight:l?"".concat(.2*a,"rem solid #959595"):"".concat(.5*a,"px solid #959595"),borderBottom:n?"".concat(.2*a,"rem solid #959595"):"".concat(.5*a,"px solid #959595"),boxSizing:"border-box",color:i?"#FFDA00":"black",animation:s?"flash 0.5s":"none","@keyframes flash":{"0%, 100%":{backgroundColor:"#E6E6E6"},"50%":{backgroundColor:"#FFDA00"}}}}),S=(0,b.ZP)(h.Z,{shouldForwardProp:e=>"isHovered"!==e&&"scaleFactor"!==e})(e=>{let{isHovered:t,scaleFactor:o}=e;return{position:"absolute",width:"".concat(9*o,"rem"),height:"".concat(9*o,"rem"),backgroundColor:t?"rgba(0, 0, 0, 0.30)":"transparent",transition:"background-color 0.2s ease",pointerEvents:"none"}}),y=(0,b.ZP)(h.Z,{shouldForwardProp:e=>"scaleFactor"!==e})(e=>{let{scaleFactor:t}=e;return{width:"".concat(27*t,"rem"),height:"".concat(27*t,"rem"),display:"grid",gridTemplateColumns:"repeat(9, 1fr)",gridTemplateRows:"repeat(9, 1fr)",position:"relative",boxSizing:"content-box",border:"".concat(.2*t,"rem solid black")}}),z=l.forwardRef((e,t)=>{let{puzzle:o,solution:n,isLargeScreenDevice:a,handleHintVisibleAtIndex:i,hintMode:s,hintVisibleState:d}=e,[c,u]=(0,l.useState)("initial"),[p,m]=(0,l.useState)([]),[g,x]=(0,l.useState)(Array(9).fill(!1)),[f,b]=(0,l.useState)(null),[z,C]=(0,l.useState)(null),[B,Z]=(0,l.useState)(null),[j,w]=(0,l.useState)(null),F=a?.9:.55;(0,l.useEffect)(()=>{resetBoard()},[o,n,s]);let resetBoard=()=>{C(null),Z(null),w(null),b(null),x(Array(9).fill(!1));let e=o.map((e,t)=>e);m(e)};l.useImperativeHandle(t,()=>({displayPuzzle:()=>{u("puzzle"),m([...o]),x(Array(9).fill(!1))},displaySolution:()=>{u("solution"),m([...n]),x(Array(9).fill(!0))},resetBoard:()=>{resetBoard()}}));let getBlockIndex=(e,t)=>3*Math.floor(e/3)+Math.floor(t/3),getCandidateNumbers=e=>{let t=Math.floor(e/9),o=e%9,r=getBlockIndex(t,o),l=new Set([1,2,3,4,5,6,7,8,9]);for(let e=0;e<9;e++)0!==p[9*t+e]&&l.delete(p[9*t+e]);for(let e=0;e<9;e++)0!==p[9*e+o]&&l.delete(p[9*e+o]);let n=3*Math.floor(r/3),a=r%3*3;for(let e=0;e<3;e++)for(let t=0;t<3;t++){let o=p[(n+e)*9+(a+t)];0!==o&&l.delete(o)}return Array.from(l).sort((e,t)=>e-t)},handleCellClick=e=>{if("block"===s){handleBlockClick(getBlockIndex(Math.floor(e/9),e%9));return}let t=0!==o[e];if(t||d){w(e),Z(null),C(null),setTimeout(()=>w(null),500);return}if(z===e)C(null),Z(null);else{C(e);let t=getCandidateNumbers(e),o=t.length>0?"Possible: ".concat(t.join(", ")):"No possible candidates.";Z({text:o})}},handleBlockClick=e=>{let t=!1;for(let r=0;r<9;r++){for(let l=0;l<9;l++)if(getBlockIndex(r,l)===e&&0===o[9*r+l]){t=!0;break}if(t)break}if(!t)return;let r=[...g];r[e]=!r[e],x(r),r.every(e=>e)?i(!0):r.every(e=>!e)&&i(!1);let l=o.map((e,t)=>{let o=getBlockIndex(Math.floor(t/9),t%9);return 0===e&&r[o]?n[t]:e});m(l)},getBlockPosition=e=>({left:"".concat(e%3*9*F,"rem"),top:"".concat(9*Math.floor(e/3)*F,"rem")});return(0,r.jsxs)(h.Z,{position:"relative",children:[[0,1,2,3,4,5,6,7,8].map(e=>{let t=getBlockPosition(e);return(0,r.jsx)(S,{isHovered:f===e,style:{...t,zIndex:1},scaleFactor:F},"highlight-".concat(e))}),(0,r.jsx)(y,{scaleFactor:F,children:p.map((e,t)=>{let l=Math.floor(t/9),n=t%9,a=getBlockIndex(l,n),i=0!==o[t],d=!i&&0!==e&&("initial"!==c||g[a]),u=(n+1)%3==0&&8!==n,p=(l+1)%3==0&&8!==l,m=z===t&&B?B.text:"";return(0,r.jsx)(k.Z,{open:z===t&&"candidate"===s&&!i,title:m,arrow:!0,placement:"bottom",componentsProps:{tooltip:{sx:{marginTop:"4px !important",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",fontSize:"0.9rem",borderRadius:"6px"}}},children:(0,r.jsx)(v,{isPrefilled:i,isHighlighted:d,isRightEdge:u,isBottomEdge:p,isSelected:z===t,isFlashing:j===t,scaleFactor:F,onClick:()=>handleCellClick(t),onMouseEnter:()=>"block"===s&&b(a),onMouseLeave:()=>"block"===s&&b(null),sx:{cursor:"pointer",position:"relative"},children:0!==e?e:z===t?"?":""})},t)})})]})});var C=o(2450),B=o(2961);let Z=["#f9df6d","#f7da21","#FB9B00"];var SudokuHintDisplay=function(e){let{responseData:t}=e,o=["easy","medium","hard"],[b,k]=l.useState(o.map(()=>!1)),[v,S]=l.useState(o.map(()=>"candidate")),y=l.useRef(o.map(()=>l.createRef())),j=(0,n.Z)(),w=(0,a.Z)(j.breakpoints.up("sm")),displayPuzzle=e=>{y.current[e]&&y.current[e].current&&y.current[e].current.displayPuzzle()},displaySolution=e=>{y.current[e]&&y.current[e].current&&y.current[e].current.displaySolution()},resetBoard=e=>{y.current[e]&&y.current[e].current&&y.current[e].current.resetBoard()},handleHintToggleVisibility=e=>{k(t=>{let o=!t[e];return o?displaySolution(e):displayPuzzle(e),t.map((t,r)=>r===e?o:t)})},handleHintToggleModes=(e,t)=>{S(o=>o.map((o,r)=>r===e?t:o)),k(t=>t.map((t,o)=>o!==e&&t))},handleHintVisibleAtIndex=(e,t)=>{k(o=>{let r=o[e],l=void 0!==t?t:!r;return r===l?o:o.map((t,o)=>o===e?l:t)})};return(0,r.jsx)(r.Fragment,{children:o.map((e,o)=>{var l,n,a,k,S,F;return(0,r.jsxs)(i.Z,{slotProps:{transition:{unmountOnExit:!0}},sx:{backgroundColor:Z[o],"&.Mui-expanded":{marginTop:"".concat(j.spacing(2)," !important"),backgroundColor:Z[o]},borderRadius:"0.75rem !important",boxShadow:"0 0.25rem 0.375rem rgba(0, 0, 0, 0.08) !important","&:before":{display:"none"},"& .MuiCollapse-root":{borderBottomLeftRadius:"0.75rem",borderBottomRightRadius:"0.75rem"}},children:[(0,r.jsx)(s.Z,{expandIcon:(0,r.jsx)(f.Z,{}),id:"panel".concat(o+1,"-header"),"aria-controls":"panel".concat(o+1,"-content"),children:(0,r.jsxs)(d.Z,{sx:{fontWeight:500,fontSize:{xs:"1rem",sm:"1.1rem"}},children:[w?"Click":"Tap"," for a hint: ",e.charAt(0).toUpperCase()+e.slice(1)," puzzle"]})}),(0,r.jsxs)(c.Z,{children:[(0,r.jsxs)(u.Z,{value:v[o],onChange:e=>handleHintToggleModes(o,e.target.value),sx:{mb:2,"& .MuiFormControlLabel-root":{marginBottom:1}},children:[(0,r.jsx)(p.Z,{value:"candidate",control:(0,r.jsx)(m.Z,{size:"small"}),label:"Show Candidate Hints (Tap an empty cell)",sx:{"& .MuiTypography-root":{fontSize:{xs:"0.875rem",sm:"0.9rem"},color:"text.secondary"}}}),(0,r.jsx)(p.Z,{value:"block",control:(0,r.jsx)(m.Z,{size:"small"}),label:"Reveal 3x3 Block Answers (Tap a 3x3 region)",sx:{"& .MuiTypography-root":{fontSize:{xs:"0.875rem",sm:"0.9rem"},color:"text.secondary"}}})]}),(0,r.jsx)(h.Z,{children:(0,r.jsx)(z,{ref:y.current[o],puzzle:null==t?void 0:null===(a=t.gameData)||void 0===a?void 0:null===(n=a[e])||void 0===n?void 0:null===(l=n.puzzle_data)||void 0===l?void 0:l.puzzle,solution:null==t?void 0:null===(F=t.gameData)||void 0===F?void 0:null===(S=F[e])||void 0===S?void 0:null===(k=S.puzzle_data)||void 0===k?void 0:k.solution,isLargeScreenDevice:w,handleHintVisibleAtIndex:e=>handleHintVisibleAtIndex(o,e),hintMode:v[o],hintVisibleState:b[o]})})]}),(0,r.jsx)(g.Z,{sx:{padding:"8px 16px 16px",borderTop:"none"},children:(0,r.jsx)(x.Z,{variant:"contained",startIcon:b[o]?(0,r.jsx)(C.Z,{sx:{fontSize:"1.1rem"}}):(0,r.jsx)(B.Z,{sx:{fontSize:"1.1rem"}}),onClick:()=>{resetBoard(o),handleHintToggleVisibility(o)},sx:{textTransform:"none",fontSize:"0.9rem",fontWeight:500,backgroundColor:"rgba(0, 0, 0, 0.1)",color:"rgba(0, 0, 0, 0.8)",boxShadow:"none","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.15)",boxShadow:"none"},borderRadius:"6px",py:.75},children:b[o]?"Hide Numbers":"Show Numbers"})})]},o)})})}}}]);