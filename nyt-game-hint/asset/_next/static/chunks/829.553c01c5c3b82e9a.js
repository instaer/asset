"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[829],{8829:function(e,t,l){l.r(t);var o=l(5893),r=l(7294),n=l(948),a=l(5616),i=l(4386);let s=(0,n.ZP)(a.Z,{shouldForwardProp:e=>"isPrefilled"!==e&&"isHighlighted"!==e&&"isRightEdge"!==e&&"isBottomEdge"!==e&&"scaleFactor"!==e&&"isSelected"!==e&&"isFlashing"!==e})(e=>{let{theme:t,isPrefilled:l,isHighlighted:o,isRightEdge:r,isBottomEdge:n,scaleFactor:a,isFlashing:i}=e;return{width:"".concat(3*a,"rem"),height:"".concat(3*a,"rem"),display:"flex",justifyContent:"center",alignItems:"center",fontSize:"".concat(1.7999999999999998*a,"rem"),fontWeight:"bold",backgroundColor:l?"#E6E6E6":o?"#FFDA00":"white",borderRight:r?"".concat(.2*a,"rem solid #959595"):"".concat(.5*a,"px solid #959595"),borderBottom:n?"".concat(.2*a,"rem solid #959595"):"".concat(.5*a,"px solid #959595"),boxSizing:"border-box",animation:i?"flash 0.5s":"none","@keyframes flash":{"0%, 100%":{backgroundColor:"#E6E6E6"},"50%":{backgroundColor:"#FFDA00"}}}}),c=(0,n.ZP)(a.Z,{shouldForwardProp:e=>"isHovered"!==e&&"scaleFactor"!==e})(e=>{let{isHovered:t,scaleFactor:l}=e;return{position:"absolute",width:"".concat(9*l,"rem"),height:"".concat(9*l,"rem"),backgroundColor:t?"rgba(0, 0, 0, 0.30)":"transparent",transition:"background-color 0.2s ease",pointerEvents:"none"}}),d=(0,n.ZP)(a.Z,{shouldForwardProp:e=>"scaleFactor"!==e})(e=>{let{scaleFactor:t}=e;return{width:"".concat(27*t,"rem"),height:"".concat(27*t,"rem"),display:"grid",gridTemplateColumns:"repeat(9, 1fr)",gridTemplateRows:"repeat(9, 1fr)",position:"relative",boxSizing:"content-box",border:"".concat(.2*t,"rem solid black")}});t.default=e=>{let{puzzle:t,solution:l,isLargeScreenDevice:n,handleHintVisibleAtIndex:u,hintMode:h,hintVisibleState:f,boardRef:g}=e,[p,m]=(0,r.useState)([]),[b,k]=(0,r.useState)(Array(9).fill(!1)),[x,C]=(0,r.useState)(null),[B,F]=(0,r.useState)({}),[y,S]=(0,r.useState)(null),[E,v]=(0,r.useState)(null),[w,P]=(0,r.useState)(null),I=n?.75:.6;(0,r.useEffect)(()=>{resetBoardInternal()},[t,l,h]);let resetBoardInternal=()=>{S(null),v(null),P(null),C(null),k(Array(9).fill(!1)),F({});let e=t.map((e,t)=>e);m(e)};r.useImperativeHandle(g,()=>({displayPuzzle:()=>{m([...t]),k(Array(9).fill(!1)),F({})},displaySolution:()=>{m([...l]),k(Array(9).fill(!0)),F(t.reduce((e,t,l)=>(0===t&&(e[l]=!0),e),{}))},resetBoard:()=>{resetBoardInternal()},closeCandidateHint:()=>{S(null),v(null)}}));let getBlockIndex=(e,t)=>3*Math.floor(e/3)+Math.floor(t/3),getCandidateNumbers=e=>{let t=Math.floor(e/9),l=e%9,o=getBlockIndex(t,l),r=new Set([1,2,3,4,5,6,7,8,9]);for(let e=0;e<9;e++)0!==p[9*t+e]&&r.delete(p[9*t+e]);for(let e=0;e<9;e++)0!==p[9*e+l]&&r.delete(p[9*e+l]);let n=3*Math.floor(o/3),a=o%3*3;for(let e=0;e<3;e++)for(let t=0;t<3;t++){let l=p[(n+e)*9+(a+t)];0!==l&&r.delete(l)}return Array.from(r).sort((e,t)=>e-t)},handleCellClick=e=>{if("block"===h){handleBlockClick(getBlockIndex(Math.floor(e/9),e%9));return}let o=0!==t[e];if("candidate"===h){if(o||f){P(e),v(null),S(null),setTimeout(()=>P(null),500);return}if(y===e){S(null),v(null);return}{S(e);let t=getCandidateNumbers(e),l=t.length>0?"Possible: ".concat(t.join(", ")):"No possible candidates.";v({text:l});return}}if("cell"===h){let r;if(o){P(e),S(null),setTimeout(()=>P(null),500);return}!0===B[e]?(S(null),r=!1):(S(e),r=!0);let n={...B,[e]:r};F(n),t.every((e,t)=>0!==e||!0===n[t])?u(!0):t.every((e,t)=>0===e||!0!==n[t])&&u(!1);let a=t.map((e,t)=>0===e&&n[t]?l[t]:e);m(a)}},handleBlockClick=e=>{let o=!1;for(let l=0;l<9;l++){for(let r=0;r<9;r++)if(getBlockIndex(l,r)===e&&0===t[9*l+r]){o=!0;break}if(o)break}if(!o)return;let r=[...b];r[e]=!r[e],k(r),r.every(e=>e)?u(!0):r.every(e=>!e)&&u(!1);let n=t.map((e,t)=>{let o=getBlockIndex(Math.floor(t/9),t%9);return 0===e&&r[o]?l[t]:e});m(n)},getBlockPosition=e=>({left:"".concat(e%3*9*I,"rem"),top:"".concat(9*Math.floor(e/3)*I,"rem")});return(0,o.jsxs)(a.Z,{position:"relative",children:[[0,1,2,3,4,5,6,7,8].map(e=>{let t=getBlockPosition(e);return(0,o.jsx)(c,{isHovered:x===e,style:{...t,zIndex:1},scaleFactor:I},"highlight-".concat(e))}),(0,o.jsx)(d,{scaleFactor:I,children:p.map((e,l)=>{let r=Math.floor(l/9),n=l%9,a=getBlockIndex(r,n),c=0!==t[l],d=(n+1)%3==0&&8!==n,u=(r+1)%3==0&&8!==r,f=y===l&&E?E.text:"";return(0,o.jsx)(i.Z,{open:y===l&&"candidate"===h&&!c,title:f,arrow:!0,placement:"bottom",componentsProps:{tooltip:{sx:{marginTop:"4px !important",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",fontSize:"0.9rem",borderRadius:"6px"}}},children:(0,o.jsx)(s,{isPrefilled:c,isHighlighted:!c&&0!==e,isRightEdge:d,isBottomEdge:u,isFlashing:w===l,scaleFactor:I,onClick:()=>handleCellClick(l),onMouseEnter:()=>"block"===h&&C(a),onMouseLeave:()=>"block"===h&&C(null),sx:{cursor:"pointer",position:"relative",color:y===l&&"candidate"===h?"#FFDA00":"black",...("candidate"===h||"cell"===h)&&{"&:hover":{border:"1px solid #444",boxShadow:"0 1px 2px rgba(0,0,0,0.2) inset"}}},children:0!==e?e:y===l?"?":""})},l)})})]})}}}]);