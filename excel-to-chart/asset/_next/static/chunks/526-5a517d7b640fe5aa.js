"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[526],{1526:function(e,t,a){a.d(t,{E:function(){return BarPlot}});var r=a(3366),l=a(7462),i=a(7294),s=a(4869),o=a(7003),n=a(4780),d=a(2963),h=a(4867),u=a(948),y=a(1588),g=a(2462),c=a(5607),p=a(1404),b=a(5893);let m=["id","dataIndex","classes","color","slots","slotProps","style","onClick"];function getBarElementUtilityClass(e){return(0,h.ZP)("MuiBarElement",e)}(0,y.Z)("MuiBarElement",["root"]);let useUtilityClasses=e=>{let{classes:t,id:a}=e,r={root:["root",`series-${a}`]};return(0,n.Z)(r,getBarElementUtilityClass,t)},x=(0,u.ZP)(s.q.rect,{name:"MuiBarElement",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>({stroke:"none",fill:e.isHighlighted?(0,g.ZP)(e.color).brighter(.5).formatHex():e.color,transition:"opacity 0.2s ease-in, fill 0.2s ease-in",opacity:e.isFaded&&.3||1}));function BarElement(e){let{id:t,dataIndex:a,classes:i,color:s,slots:o,slotProps:n,style:h,onClick:u}=e,y=(0,r.Z)(e,m),g=(0,c.J)(),{isFaded:f,isHighlighted:v}=(0,p.q)({seriesId:t,dataIndex:a}),B={id:t,dataIndex:a,classes:i,color:s,isFaded:f,isHighlighted:v},P=useUtilityClasses(B),Z=o?.bar??x,I=(0,d.Z)({elementType:Z,externalSlotProps:n?.bar,externalForwardedProps:y,additionalProps:(0,l.Z)({},g({type:"bar",seriesId:t,dataIndex:a}),{style:h,onClick:u,cursor:u?"pointer":"unset"}),className:P.root,ownerState:B});return(0,b.jsx)(Z,(0,l.Z)({},I))}var f=a(3408),v=a(6222);let getRadius=(e,{hasNegative:t,hasPositive:a,borderRadius:r,layout:l})=>{if(!r)return 0;let i="vertical"===l;return"top-left"===e&&(i&&a||!i&&t)||"top-right"===e&&(i&&a||!i&&a)||"bottom-right"===e&&(i&&t||!i&&a)||"bottom-left"===e&&(i&&t||!i&&t)?r:0},B=["style","maskId"],buildInset=e=>`inset(0px round ${e.topLeft}px ${e.topRight}px ${e.bottomRight}px ${e.bottomLeft}px)`;function BarClipRect(e){let t=e.ownerState;return(0,b.jsx)(s.q.rect,{style:(0,l.Z)({},e.style,{clipPath:("vertical"===e.ownerState.layout?e.style?.height:e.style?.width).to(e=>buildInset({topLeft:Math.min(e,getRadius("top-left",t)),topRight:Math.min(e,getRadius("top-right",t)),bottomRight:Math.min(e,getRadius("bottom-right",t)),bottomLeft:Math.min(e,getRadius("bottom-left",t))}))})})}function BarClipPath(e){let{style:t,maskId:a}=e,l=(0,r.Z)(e,B);return!e.borderRadius||e.borderRadius<=0?null:(0,b.jsx)("clipPath",{id:a,children:(0,b.jsx)(BarClipRect,{ownerState:l,style:t})})}function getBarLabelUtilityClass(e){return(0,h.ZP)("MuiBarLabel",e)}let P=(0,y.Z)("MuiBarLabel",["root","highlighted","faded"]),barLabelClasses_useUtilityClasses=e=>{let{classes:t,seriesId:a,isFaded:r,isHighlighted:l}=e,i={root:["root",`series-${a}`,l&&"highlighted",r&&"faded"]};return(0,n.Z)(i,getBarLabelUtilityClass,t)},getBarLabel=e=>{let{barLabel:t,value:a,dataIndex:r,seriesId:l,height:i,width:s}=e;return"value"===t?a?a?.toString():null:t({seriesId:l,dataIndex:r,value:a},{bar:{height:i,width:s}})};var Z=a(1657);let I=["seriesId","dataIndex","color","isFaded","isHighlighted","classes"],$=(0,u.ZP)(s.q.text,{name:"MuiBarLabel",slot:"Root",overridesResolver:(e,t)=>[{[`&.${P.faded}`]:t.faded},{[`&.${P.highlighted}`]:t.highlighted},t.root]})(({theme:e})=>(0,l.Z)({},e?.typography?.body2,{stroke:"none",fill:(e.vars||e)?.palette?.text?.primary,transition:"opacity 0.2s ease-in, fill 0.2s ease-in",textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",opacity:1,[`&.${P.faded}`]:{opacity:.3}}));function BarLabel(e){let t=(0,Z.Z)({props:e,name:"MuiBarLabel"}),a=(0,r.Z)(t,I);return(0,b.jsx)($,(0,l.Z)({},a))}let k=["seriesId","classes","color","style","dataIndex","barLabel","slots","slotProps","height","width","value"],M=["ownerState"];function BarLabelItem(e){let{seriesId:t,classes:a,color:i,style:s,dataIndex:o,barLabel:n,slots:h,slotProps:u,height:y,width:g,value:c}=e,m=(0,r.Z)(e,k),{isFaded:x,isHighlighted:f}=(0,p.q)({seriesId:t,dataIndex:o}),v={seriesId:t,classes:a,color:i,isFaded:x,isHighlighted:f,dataIndex:o},B=barLabelClasses_useUtilityClasses(v),P=h?.barLabel??BarLabel,Z=(0,d.Z)({elementType:P,externalSlotProps:u?.barLabel,additionalProps:(0,l.Z)({},m,{style:s,className:B.root}),ownerState:v}),{ownerState:I}=Z,$=(0,r.Z)(Z,M);if(!n)return null;let L=getBarLabel({barLabel:n,value:c,dataIndex:o,seriesId:t,height:y,width:g});return L?(0,b.jsx)(P,(0,l.Z)({},$,I,{children:L})):null}let L=["bars","skipAnimation"],leaveStyle=({layout:e,yOrigin:t,x:a,width:r,y:i,xOrigin:s,height:o})=>(0,l.Z)({},"vertical"===e?{y:t,x:a+r/2,height:0,width:r}:{y:i+o/2,x:s,height:o,width:0}),enterStyle=({x:e,width:t,y:a,height:r})=>({x:e+t/2,y:a+r/2,height:r,width:t});function BarLabelPlot(e){let{bars:t,skipAnimation:a}=e,o=(0,r.Z)(e,L),n=(0,s.Yz)(t,{keys:e=>`${e.seriesId}-${e.dataIndex}`,from:leaveStyle,leave:null,enter:enterStyle,update:enterStyle,immediate:a});return(0,b.jsx)(i.Fragment,{children:n((e,{seriesId:t,dataIndex:a,color:r,value:i,width:s,height:n})=>(0,b.jsx)(BarLabelItem,(0,l.Z)({seriesId:t,dataIndex:a,value:i,color:r,width:s,height:n},o,{style:e})))})}var w=a(4143),S=a(8059);let getAxisMessage=(e,t)=>{let a=`${e}-axis`,r=`${e}Axis`,l="x"===e?w.nk:w.Vd;return t===l?`The first \`${r}\``:`The ${a} with id "${t}"`};var R=a(9439),C=a(4340);let _=["skipAnimation","onItemClick","borderRadius","barLabel"],useAggregatedData=()=>{let e=(0,R.qZ)()??{series:{},stackingGroups:[],seriesOrder:[]},t=(0,o.r)(),a=(0,v.u)(),{series:r,stackingGroups:l}=e,{xAxis:i,yAxis:s,xAxisIds:n,yAxisIds:d}=t,h=n[0],u=d[0],y={},g=l.flatMap(({ids:e},t)=>e.flatMap(e=>{let o=r[e].xAxisId??r[e].xAxisKey??h,n=r[e].yAxisId??r[e].yAxisKey??u,d=i[o],g=s[n],c="vertical"===r[e].layout;!function(e,t,a,r,l,i){let s=r[a],o=i[l],n=e?s:o,d=e?o:s,h=e?a:l,u=e?"x":"y";if(!(0,S.Q)(n))throw Error(`MUI X: ${getAxisMessage(u,h)} should be of type "band" to display the bar series of id "${t}".`);if(void 0===n.data)throw Error(`MUI X: ${getAxisMessage(u,h)} should have data property.`);if((0,S.Q)(d)||(0,S.T)(d))throw Error(`MUI X: ${getAxisMessage(e?"y":"x",e?l:a)} should be a continuous type to display the bar series of id "${t}".`)}(c,e,o,i,n,s);let p=c?d:g,b=d.scale,m=g.scale,x=(0,f.Z)(r[e],i[o],s[n]),v=p.scale.bandwidth(),{barWidth:B,offset:P}=function({bandWidth:e,numberOfGroups:t,gapRatio:a}){if(0===a)return{barWidth:e/t,offset:0};let r=e/(t+(t-1)*a);return{barWidth:r,offset:a*r}}({bandWidth:v,numberOfGroups:l.length,gapRatio:p.barGapRatio}),Z=t*(B+P),{stackedData:I}=r[e];return I.map((l,d)=>{let h=l.map(e=>c?m(e):b(e)),u=Math.round(Math.min(...h)),g=Math.round(Math.max(...h)),p=r[e].stack,f={seriesId:e,dataIndex:d,layout:r[e].layout,x:c?b(i[o].data?.[d])+Z:u,y:c?u:m(s[n].data?.[d])+Z,xOrigin:b(0),yOrigin:m(0),height:c?g-u:B,width:c?B:g-u,color:x(d),value:r[e].data[d],maskId:`${a}_${p||e}_${t}_${d}`};y[f.maskId]||(y[f.maskId]={id:f.maskId,width:0,height:0,hasNegative:!1,hasPositive:!1,layout:f.layout,xOrigin:b(0),yOrigin:m(0),x:0,y:0});let v=y[f.maskId];return v.width="vertical"===f.layout?f.width:v.width+f.width,v.height="vertical"===f.layout?v.height+f.height:f.height,v.x=Math.min(0===v.x?1/0:v.x,f.x),v.y=Math.min(0===v.y?1/0:v.y,f.y),v.hasNegative=v.hasNegative||(f.value??0)<0,v.hasPositive=v.hasPositive||(f.value??0)>0,f})}));return{completedData:g,masksData:Object.values(y)}},BarPlot_leaveStyle=({layout:e,yOrigin:t,x:a,width:r,y:i,xOrigin:s,height:o})=>(0,l.Z)({},"vertical"===e?{y:t,x:a,height:0,width:r}:{y:i,x:s,height:o,width:0}),BarPlot_enterStyle=({x:e,width:t,y:a,height:r})=>({y:a,x:e,height:r,width:t});function BarPlot(e){let{completedData:t,masksData:a}=useAggregatedData(),{skipAnimation:o,onItemClick:n,borderRadius:d,barLabel:h}=e,u=(0,r.Z)(e,_),y=(0,C.r)(o),g=!d||d<=0,c=(0,s.Yz)(t,{keys:e=>`${e.seriesId}-${e.dataIndex}`,from:BarPlot_leaveStyle,leave:BarPlot_leaveStyle,enter:BarPlot_enterStyle,update:BarPlot_enterStyle,immediate:y}),p=(0,s.Yz)(g?[]:a,{keys:e=>e.id,from:BarPlot_leaveStyle,leave:BarPlot_leaveStyle,enter:BarPlot_enterStyle,update:BarPlot_enterStyle,immediate:y});return(0,b.jsxs)(i.Fragment,{children:[!g&&p((e,{id:t,hasPositive:a,hasNegative:r,layout:l})=>(0,b.jsx)(BarClipPath,{maskId:t,borderRadius:d,hasNegative:r,hasPositive:a,layout:l,style:e})),c((e,{seriesId:t,dataIndex:a,color:r,maskId:i})=>{let s=(0,b.jsx)(BarElement,(0,l.Z)({id:t,dataIndex:a,color:r},u,{onClick:n&&(e=>{n(e,{type:"bar",seriesId:t,dataIndex:a})}),style:e}));return g?s:(0,b.jsx)("g",{clipPath:`url(#${i})`,children:s})}),h&&(0,b.jsx)(BarLabelPlot,(0,l.Z)({bars:t,skipAnimation:y,barLabel:h},u))]})}}}]);