"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[948],{8948:function(e,t,a){a.r(t),a.d(t,{Pie:function(){return Pie},default:function(){return PieChartPage}});var n=a(5893),c=a(7475),l=a(6550),r=a(7294),i=a(2734),u=a(7292),o=a(5861),s=a(8625),d=a(8503),h=a(143);function PieChartPage(){return(0,n.jsx)(c.Z,{CHART_TYPE:l.y[2],ChartComponent:e=>{let{dataset:t,chartOptions:a}=e;return(0,n.jsx)(Pie,{dataset:t,chartOptions:a})}})}function Pie(e){let{dataset:t,chartOptions:a}=e,c=(0,i.Z)(),l=(0,u.Z)(c.breakpoints.down("sm")),{chartTitle:p,dataColumns:g,dimensionColumn:P,sortOption:f,filterOption:m,aggregationOption:v,sampleOption:b,colorStyle:C,chartWidth:y,marginConfig:k,legendConfig:x,arcLabelConfig:j,pieTopItems:w,pieInnerRadius:A}=a,L=(0,h.oy)(),{localDataset:R,localDataColumns:T}=r.useMemo(()=>{let e=(0,d.pQ)(t,g,P,f,m,v,b),a=processPieTopItems(e.localDataset,P,w);return{localDataset:a,localDataColumns:e.localDataColumns}},[t,g,P,f,m,v,b,w]);if(!P&&!R)return null;let _=h.c3.includes(v.displayMethod)?e=>"".concat(e.value,"%"):e=>"".concat(e.value),D=function(e,t,a,n){if(!e.length)return[];let c=(0,d.Sk)(e.length,n),l=Object.keys(e[0]).find(e=>e!==a&&t.includes(e));return e.map((e,t)=>({id:t,value:e[l],label:e[a],color:c[t]}))}(R,T,P,C),I=D.reduce((e,t)=>e+t.value,0);return(0,n.jsxs)(n.Fragment,{children:[p&&(0,n.jsx)(o.Z,{variant:"h6",align:"center",sx:{fontWeight:500,fontSize:"1.1rem",color:"text.primary",mt:1},children:p}),(0,n.jsx)(s.u,{margin:k,height:parseInt(c.spacing(l?32:36)),width:y||L.minChartWidth,series:[{data:D,valueFormatter:e=>_(e),arcLabel:e=>(function(e,t,a){var n,c,l;switch(e){case 0:default:return"";case 1:return"".concat(null!==(n=a.label)&&void 0!==n?n:"");case 2:return"".concat(a.value);case 3:return"".concat(calculatePercentage(a.value,t));case 4:return"".concat(null!==(c=a.label)&&void 0!==c?c:""," (").concat(a.value,")");case 5:return"".concat(null!==(l=a.label)&&void 0!==l?l:""," (").concat(calculatePercentage(a.value,t),")");case 6:return"".concat(a.value," (").concat(calculatePercentage(a.value,t),")");case 7:return"".concat(calculatePercentage(a.value,t)," (").concat(a.value,")")}})(j.displayType,I,e),arcLabelMinAngle:3.6*(j.minPercentage||L.minPieArcLabelMinAngle),arcLabelRadius:"".concat(j.radius||L.minPieArcLabelRadius,"%"),innerRadius:"".concat(A||L.minPieInnerRadius,"%")}],slotProps:{legend:{hidden:x.hidden,direction:x.direction,position:x.position,padding:x.padding,labelStyle:{fontSize:"small"}}}})]})}function calculatePercentage(e,t){return(e/t*100).toFixed(2)+"%"}let processPieTopItems=(e,t,a)=>{if(!a||e.length<=a)return e;let n=Object.keys(e[0]).find(e=>e!==t),c=[...e].sort((e,t)=>t[n]-e[n]),l=c.slice(0,a),r=c.slice(a).reduce((e,t)=>e+t[n],0);return[...l,{[t]:"Other",[n]:r}]}}}]);